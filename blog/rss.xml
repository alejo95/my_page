<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Alejo | DevOps Portfolio Blog</title>
        <link>http://iamdevops.site/blog</link>
        <description>Alejo | DevOps Portfolio Blog</description>
        <lastBuildDate>Thu, 12 Jun 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>es</language>
        <item>
            <title><![CDATA[Database DevOps con Liquibase]]></title>
            <link>http://iamdevops.site/blog/liquibase</link>
            <guid>http://iamdevops.site/blog/liquibase</guid>
            <pubDate>Thu, 12 Jun 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Hola, amigos üòÉ DevOps. Hoy hablaremos sobre Database DevOps.]]></description>
            <content:encoded><![CDATA[<p>Hola, amigos üòÉ DevOps. Hoy hablaremos sobre <strong>Database DevOps</strong>.</p>
<p>Como bien sabemos, DevOps ha sido clave en el desarrollo de aplicaciones, especialmente al facilitar los procesos de entrega
contin√∫a e integrando a los equipos de desarrollo y operaciones en flujos de trabajo √°giles y optimizados.</p>
<p>Sin embargo, muchas veces durante el desarrollo de una aplicaci√≥n omitimos la importancia de las bases de datos. Nos enfocamos en
escribir c√≥digo y en contar con herramientas que permitan hacer Rollback de nuestro c√≥digo de forma r√°pida en caso de alg√∫n error.
Pero hacer Rollback en una base de datos puede ser mucho m√°s delicado y perjudicial si no se maneja correctamente.</p>
<p>Por eso, dentro de DevOps se han implementado herramientas y pr√°cticas que nos permiten gestionar los cambios en bases de datos üìà
de manera segura y eficiente. En este blog veremos c√≥mo usar <strong>Liquibase</strong> y c√≥mo puede ayudarnos a mejorar nuestro flujo de
trabajo y de esta forma mantener nuestra base de datos de una forma consistente.</p>
<img src="http://iamdevops.site/img/blog/devops/databasedevops.png" alt="contenedor" width="600">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ques-database-devops-">¬øQues Database DevOps? üë®‚Äçüíª<a href="http://iamdevops.site/blog/liquibase#ques-database-devops-" class="hash-link" aria-label="Enlace directo al ¬øQues Database DevOps? üë®‚Äçüíª" title="Enlace directo al ¬øQues Database DevOps? üë®‚Äçüíª">‚Äã</a></h2>
<p>Es traer las pr√°cticas y principios implementados en el mundo del <strong>DevOps</strong> buscando garantizar que el c√≥digo de las bases de
los datos se incluyen en el mismo proceso que el c√≥digo de desarrollo. Con esto buscamos solucionar el cuello de botella que se
puede presentar al momento de generar los cambios en el c√≥digo de la base de datos, ya que en muchos de los casos estos cambios
tienen que ser validados por un <strong>DBA</strong>(data base administrador) y facilit√°ndole el trabajo, ya que ellos se encargaran de
enfocarse en temas respecto a la base de datos.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="porque-surge-esta-problematica-">¬øPorque surge esta problematica? üòß<a href="http://iamdevops.site/blog/liquibase#porque-surge-esta-problematica-" class="hash-link" aria-label="Enlace directo al ¬øPorque surge esta problematica? üòß" title="Enlace directo al ¬øPorque surge esta problematica? üòß">‚Äã</a></h2>
<p>Esta problem√°tica se da debido a que muchas veces los programadores realizan actualizaciones en el c√≥digo fuente de las
aplicaciones que algunas ocasiones implementa cambios en el c√≥digo de la base de datos, estos cambios tenemos que llevarlos
a cabo haciendo uso de SQL.</p>
<p>Para entender esto de una forma m√°s f√°cil dejar√© un diagrama que muestra el flujo manual que se suele llevar por un equipo
convencional de DBA generando pausa entre cada paso (generando un cuello de botella).</p>
<img src="http://iamdevops.site/img/blog/devops/vidadeldesarollo.png" alt="contenedor" width="700">
<p>debido a que estos procesos funcionan de una forma manual, deben llevarse a cabo las revisiones del c√≥digo de base datos
suele ser lo ultimo en realizarse suele generar un retraso en el lanzamiento. Esto genera un problema, pues genera un retraso
generando problemas pues la validaci√≥n y revisi√≥n no son eficientes. Todo proceso de cambio en la base de datos es simplemente
un obst√°culo.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="una-soluci√≥n-entre-muchas-">Una soluci√≥n entre muchas üîß<a href="http://iamdevops.site/blog/liquibase#una-soluci%C3%B3n-entre-muchas-" class="hash-link" aria-label="Enlace directo al Una soluci√≥n entre muchas üîß" title="Enlace directo al Una soluci√≥n entre muchas üîß">‚Äã</a></h2>
<p>En este caso como hemos hablado desde un principio aqu√≠ es donde entra nuestra soluci√≥n <strong>Liquidbase</strong> como una herramienta echa
para quitar esas paradas innecesarias, donde el <strong>DBA</strong> debe revisar los cambios hasta la fase final, sin la necesidad de hacer
las revisiones en etapas tempranas del proceso y as√≠ empaquetar todo el c√≥digo.</p>
<img src="http://iamdevops.site/img/blog/devops/unficacionvidadelsoftware.png" alt="contenedor" width="700">
<p>Una soluci√≥n DevOps de bases de datos como <a href="https://www.liquibase.com/how-liquibase-works" target="_blank" rel="noopener noreferrer">Liquibase</a>. Permite a los equipos
automatizar y gestionar la gesti√≥n de cambios para optimizar este cuello de botella y acelerar los procesos de las
aplicaciones. Esto es lo que hace que esta soluci√≥n sea tan valiosa.</p>
<p><strong>Liquibase</strong> Nos permite gestionar estas actualizaciones de una forma f√°cil y que igual forma nos permite realizar un Rollback
de una forma f√°cil y r√°pida, ayud√°ndonos a mantener la consistencia en la base datos, adem√°s nos permite llevar un controlo de
versiones, la cual realizar de una forma inicial manualmente y en el futuro tambi√©n nos permite automatizar este proceso.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="laboratorio-liquibase-">Laboratorio Liquibase üß™<a href="http://iamdevops.site/blog/liquibase#laboratorio-liquibase-" class="hash-link" aria-label="Enlace directo al Laboratorio Liquibase üß™" title="Enlace directo al Laboratorio Liquibase üß™">‚Äã</a></h2>
<p>Hoy realizare la implementaci√≥nde liquidase si quieres implementarlodejare los paso para que lo sigas y tambi√©npuedas
implementarlo en t√∫ m√°quina si quieres implementarlo a un <strong>CI/CD</strong> debemos realizar otros paso, en esta primer guia,
encuentrasla implementaci√≥n de liquibase donde el objetivo es aprender como liquibase gestiona cambios en las bases de datos de
forma controlada usando archivos de tipo chagelog( YAML, XML, JSON o SQL). <strong>Vamos! ü•≥</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-requisitos-previos">‚öôÔ∏è Requisitos previos<a href="http://iamdevops.site/blog/liquibase#%EF%B8%8F-requisitos-previos" class="hash-link" aria-label="Enlace directo al ‚öôÔ∏è Requisitos previos" title="Enlace directo al ‚öôÔ∏è Requisitos previos">‚Äã</a></h3>
<p>antes de comenzar debemos tener los siguiente recursos instalados en nuestro equipo üíª en este caso realizamos la configuraci√≥n
en macOs, dejare una referencia para que instales en Linux.</p>
<ol>
<li><strong>Docker</strong>: lo usaremos para levantar nuestra base de datos de prueba y nuestro liquibase</li>
<li><strong>Editor de codigo</strong>: En mi caso usare VS Code</li>
<li><strong>Java JDK</strong> 11 o Superior  (opcional)</li>
<li><strong>Liquibase(CLI)</strong> Herramienta a usar (opcional)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instalar-docker-necesario">Instalar Docker (Necesario)<a href="http://iamdevops.site/blog/liquibase#instalar-docker-necesario" class="hash-link" aria-label="Enlace directo al Instalar Docker (Necesario)" title="Enlace directo al Instalar Docker (Necesario)">‚Äã</a></h3>
<p>Para crear bases de datos de prueba sin instalar nada m√°s en tu Mac Ve a <a href="https://docs.docker.com/desktop/mac/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/desktop/mac/install/</a>
Descarga e instala Docker Desktop para Mac.</p>
<p>Abre Docker Desktop y aseg√∫rate que est√© corriendo.</p>
<p>Verifica desde Terminal:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker compose version</span><br></span></code></pre></div></div>
<img src="http://iamdevops.site/img/blog/devops/dockerinstall.png" alt="Terminal mostrando la versi√≥n de docker instalada, texto 
visible: docker version 17.0.2 2022-01-18, ambiente de desarrollo en macOS, tono informativo y neutral" width="600">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instalar-homebrew-si-no-lo-tienes">Instalar Homebrew (si no lo tienes)<a href="http://iamdevops.site/blog/liquibase#instalar-homebrew-si-no-lo-tienes" class="hash-link" aria-label="Enlace directo al Instalar Homebrew (si no lo tienes)" title="Enlace directo al Instalar Homebrew (si no lo tienes)">‚Äã</a></h3>
<p>Si no tienes Homebrew, instala con:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-jdk-opcional">JAVA JDK (opcional)<a href="http://iamdevops.site/blog/liquibase#java-jdk-opcional" class="hash-link" aria-label="Enlace directo al JAVA JDK (opcional)" title="Enlace directo al JAVA JDK (opcional)">‚Äã</a></h3>
<p>Verificamos si tenemos intalado java</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -version</span><br></span></code></pre></div></div>
<p>En caso de que lo tengas instalado continua al siguiente paso de instalaci√≥n de liquibase</p>
<ul>
<li>
<p>Instalaci√≥n</p>
<p>Para instalarlo tendremos que usar el siguiente comando en caso de usar hombrew</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install openjdk@17</span><br></span></code></pre></div></div>
</li>
<li>
<p>A√±ade a tu PATH (varia segun la versi√≥n estalada)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ln -sfn $(brew --prefix openjdk@17)/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-17.jdk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 'export PATH="/usr/local/opt/openjdk@17/bin:$PATH"' &gt;&gt; ~/.zshrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source ~/.zshrc</span><br></span></code></pre></div></div>
</li>
<li>
<p>Volvemos a repetir la verficaci√≥n del JDK</p>
<p>Verificamos si tenemos instalado Java.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -version</span><br></span></code></pre></div></div>
<p>Si est√° instalado, ver√°s una salida similar a la siguiente imagen:</p>
<img src="http://iamdevops.site/img/blog/devops/terminal_susses_jdk.png" alt="Terminal mostrando la versi√≥n de Java instalada, texto visible: openjdk version 17.0.2 2022-01-18, ambiente de desarrollo en macOS, tono informativo y neutral" width="600">
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instalemos-el-cli-de-liquibase-opcional">Instalemos el CLI de liquibase (Opcional)<a href="http://iamdevops.site/blog/liquibase#instalemos-el-cli-de-liquibase-opcional" class="hash-link" aria-label="Enlace directo al Instalemos el CLI de liquibase (Opcional)" title="Enlace directo al Instalemos el CLI de liquibase (Opcional)">‚Äã</a></h3>
<p>La forma mas facil de inplementarlo es unsado brew en el caso de mac</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install liquibase</span><br></span></code></pre></div></div>
<p>verifica la instalaci√≥n</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">liquibase --version</span><br></span></code></pre></div></div>
<p>una vez instalado si lo realizaste des de tu terminal en mac si puebas el comando de version si sale algo
como la siguiente imagen todo estara correctamente y podremos seguir sin problema üòÉ.</p>
<img src="http://iamdevops.site/img/blog/devops/liquibase_install.png" alt="Terminal mostrando la versi√≥n de liquibase instalada, texto 
visible: openjdk version 17.0.2 2022-01-18, ambiente de desarrollo en macOS, tono informativo y neutral" width="600">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instalar-cliente-postgresql-opcional">Instalar cliente PostgreSQL (opcional)<a href="http://iamdevops.site/blog/liquibase#instalar-cliente-postgresql-opcional" class="hash-link" aria-label="Enlace directo al Instalar cliente PostgreSQL (opcional)" title="Enlace directo al Instalar cliente PostgreSQL (opcional)">‚Äã</a></h3>
<p>Para interactuar con la base de datos de uba forna m√°s facil puede usar al igual que yo el cliente des Postgres:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew install postgresql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Luego </span><br></span></code></pre></div></div>
<p>prueba conectarte una vez este levantes el <strong>docker-compose</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">psql -h localhost -U liquibase -d liquibase_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Contrase√±a: liquibase</span><br></span></code></pre></div></div>
<table><thead><tr><th>Opci√≥n</th><th>Significado</th></tr></thead><tbody><tr><td><code>psql</code></td><td>Cliente de l√≠nea de comandos de PostgreSQL</td></tr><tr><td><code>-h localhost</code></td><td>Host de la base de datos (en este caso, <code>localhost</code>)</td></tr><tr><td><code>-U liquibase</code></td><td>Usuario con el que se conecta (<code>liquibase</code>)</td></tr><tr><td><code>-d liquibase_demo</code></td><td>Base de datos a la que se conecta (<code>liquibase_demo</code>)</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="iniciemos-con-nuestro-laboratorio-">Iniciemos con nuestro laboratorio üòÉ<a href="http://iamdevops.site/blog/liquibase#iniciemos-con-nuestro-laboratorio-" class="hash-link" aria-label="Enlace directo al Iniciemos con nuestro laboratorio üòÉ" title="Enlace directo al Iniciemos con nuestro laboratorio üòÉ">‚Äã</a></h3>
<p>Genial!!, Si todo t√© sali√≥ bien, en este punto ya deber√≠amos tener instalados todo lo necesario para poder iniciar
a colocar las primeras l√≠neas de c√≥digo para implementar nuestro laboratorio ü•≥.</p>
<p>para realizar nuestra prueba inicial implementaremos la siguiente estructura de carpetas</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-estructura-del-proyecto">üóÇÔ∏è estructura del proyecto<a href="http://iamdevops.site/blog/liquibase#%EF%B8%8F-estructura-del-proyecto" class="hash-link" aria-label="Enlace directo al üóÇÔ∏è estructura del proyecto" title="Enlace directo al üóÇÔ∏è estructura del proyecto">‚Äã</a></h3>
<p>esta estructuras es una estructura b√°sica solamente realizada para la prueba, para realizar un proyecto a un nivel
mas producci√≥n deber√°s realizar algunos cambios que tal vez dejar√© en otro apartado, ya que lo que buscamos en este
laboratorio es experimentar y entender como funciona <strong>liquibase</strong>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Tree</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">liquibase-lab/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ changelogs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ   ‚îú‚îÄ‚îÄ db.changelog-master.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ docker-compose.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ liquibase.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ .gitignore (opcional)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-descripci√≥n-de-archivos-y-carpetas">üìù Descripci√≥n de Archivos y Carpetas<a href="http://iamdevops.site/blog/liquibase#-descripci%C3%B3n-de-archivos-y-carpetas" class="hash-link" aria-label="Enlace directo al üìù Descripci√≥n de Archivos y Carpetas" title="Enlace directo al üìù Descripci√≥n de Archivos y Carpetas">‚Äã</a></h4>
<table><thead><tr><th>Archivo/Carpeta</th><th>Descripci√≥n</th></tr></thead><tbody><tr><td><code>changelogs/</code></td><td>Carpeta que contiene todos los archivos de cambios (changelogs).</td></tr><tr><td><code>db.changelog-master.yaml</code></td><td>Changelog principal que act√∫a como punto de entrada e incluye otros.</td></tr><tr><td><code>001-*.yaml</code>, <code>002-*.yaml</code></td><td>Archivos con cambios individuales, ordenados por prefijo num√©rico.</td></tr><tr><td><code>docker-compose.yml</code></td><td>Archivo para levantar la base de datos PostgreSQL con Docker.</td></tr><tr><td><code>liquibase.properties</code></td><td>Archivo de configuraci√≥n de Liquibase: conexi√≥n, changelog, credenciales.</td></tr><tr><td><code>README.md</code></td><td>Documentaci√≥n y notas del laboratorio.</td></tr><tr><td><code>.gitignore</code></td><td>Opcional. Ignora archivos temporales, logs, etc., si usas Git.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-crea-rapidamente-la-estructura-desde-cero">ü™Ñ Crea rapidamente la estructura desde cero<a href="http://iamdevops.site/blog/liquibase#-crea-rapidamente-la-estructura-desde-cero" class="hash-link" aria-label="Enlace directo al ü™Ñ Crea rapidamente la estructura desde cero" title="Enlace directo al ü™Ñ Crea rapidamente la estructura desde cero">‚Äã</a></h4>
<p>Con el siguiente comando podr√°s crear toda la estructur√° sin ning√∫n problema desde tu terminal, estos tambi√©n sirven en
linux</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; $ mkdir liquibase-lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; $ cd liquibase-lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; $ mkdir changelogs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; $ touch docker-compose.yml liquibase.properties changelogs/db.changelog-master.yaml README.md</span><br></span></code></pre></div></div>
<p>Una vez ya tengas la estructura creada puedes abrir tu VS Code y utilizarlo para seguir con el siguiente paso</p>
<img src="http://iamdevops.site/img/blog/devops/liquibasevscode.png" width="600">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-cremos-nuestro-docker-compose">üèóÔ∏è Cremos nuestro Docker-compose<a href="http://iamdevops.site/blog/liquibase#%EF%B8%8F-cremos-nuestro-docker-compose" class="hash-link" aria-label="Enlace directo al üèóÔ∏è Cremos nuestro Docker-compose" title="Enlace directo al üèóÔ∏è Cremos nuestro Docker-compose">‚Äã</a></h2>
<p>Ahora escribiremos el siguiente c√≥digo que lleva la configuraci√≥n de nuestro compose, junto con los diferentes
vol√∫menes que nos ayudaran a mantener que persista nuestra data</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Docker-Compose</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    db:  # Servicio de base de datos PostgreSQL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: postgres:14  # Imagen oficial de PostgreSQL, versi√≥n 14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container_name: liquibase_db  # Nombre del contenedor para referencia f√°cil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment:  # Variables de entorno para crear la base de datos inicial</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        POSTGRES_USER: liquibase      # Usuario con permisos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        POSTGRES_PASSWORD: liquibase  # Contrase√±a del usuario</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        POSTGRES_DB: liquibase_demo   # Nombre de la base de datos a crear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - "5432:5432"  # Expone el puerto de PostgreSQL al host local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - liquibase-net  # Conecta este servicio a una red personalizada</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        healthcheck:  # Verifica que PostgreSQL est√© listo antes de continuar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        test: ["CMD", "pg_isready", "-U", "liquibase"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        timeout: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        retries: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    liquibase:  # Servicio para ejecutar comandos de Liquibase CLI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image: liquibase/liquibase:latest  # Imagen oficial de Liquibase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        container_name: liquibase_cli  # Nombre del contenedor de Liquibase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        depends_on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        db:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            condition: service_healthy  # Espera a que la base de datos est√© lista</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        volumes:  # Mapea archivos locales al contenedor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - ./changelogs:/liquibase/changelogs  # Cambios en la BD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - ./liquibase.properties:/liquibase/liquibase.properties  # Configuraci√≥n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        working_dir: /liquibase  # Carpeta por defecto donde ejecuta comandos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entrypoint: ["tail", "-f", "/dev/null"]  # Mantiene el contenedor en ejecuci√≥n para uso interactivo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - liquibase-net  # Se conecta a la misma red que la BD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    liquibase-net:  # Red personalizada para que los servicios se comuniquen por nombre</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creemos-nuestro-liquibaseproperties">Creemos nuestro liquibase.properties<a href="http://iamdevops.site/blog/liquibase#creemos-nuestro-liquibaseproperties" class="hash-link" aria-label="Enlace directo al Creemos nuestro liquibase.properties" title="Enlace directo al Creemos nuestro liquibase.properties">‚Äã</a></h2>
<p>Si seguiste la gu√≠a, hasta este punto en los archivos necesarios que creamos encontraras el <em><strong>liquibase.properties</strong></em>
el cual es el archivo que contendr√° la configuraci√≥n de nuestro liquibase, es el encargado de decirle a liquibase <strong>como
conectarse ala base de datos</strong> y donde encontrar los archivos de cambios(changelogs).</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">liquibase.properties</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># liquibase.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changeLogFile: changelogs/db.changelog-master.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">url: jdbc:postgresql://db:5432/liquibase_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username: liquibase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password: liquibase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driver: org.postgresql.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logLevel: info</span><br></span></code></pre></div></div>
<p>| OJO: en el url, el host es db, el nombre del servicio del contenedor.</p>
<table><thead><tr><th>Propiedad</th><th>Descripci√≥n</th><th>Ejemplo</th></tr></thead><tbody><tr><td><code>changeLogFile</code></td><td>Ruta al archivo principal de cambios de base de datos (changelog).</td><td><code>changelogs/db.changelog.yaml</code></td></tr><tr><td><code>url</code></td><td>URL de conexi√≥n JDBC que indica el tipo de base de datos, host, puerto y nombre de la base.</td><td><code>jdbc:postgresql://db:5432/liquibase_demo</code></td></tr><tr><td><code>username</code></td><td>Usuario con permisos para ejecutar cambios en la base de datos.</td><td><code>liquibase</code></td></tr><tr><td><code>password</code></td><td>Contrase√±a del usuario de la base de datos.</td><td><code>liquibase</code></td></tr><tr><td><code>driver</code></td><td>Clase del driver JDBC correspondiente al motor de base de datos.</td><td><code>org.postgresql.Driver</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-vamos-a-crear-nuestro-changelog">üß† Vamos a crear nuestro changelog<a href="http://iamdevops.site/blog/liquibase#-vamos-a-crear-nuestro-changelog" class="hash-link" aria-label="Enlace directo al üß† Vamos a crear nuestro changelog" title="Enlace directo al üß† Vamos a crear nuestro changelog">‚Äã</a></h2>
<p>¬øQu√© hace db.changelog-master.yaml?Es un archivo maestro que organiza los cambios en la base de datos. Su funci√≥n principal es referenciar otros archivos de
cambios (por orden y modularidad), o contener directamente las instrucciones (changeSets) que Liquibase aplicar√°.</p>
<p>En este caso tenemos dos formas para poder crear nuestro <strong>changelog</strong> en este ejemplo dejar√© las referencias a las dos formas, para que entiendas que podemos
hacer.</p>
<ul>
<li>
<p>opci√≥n 1
En este caso se implementa un solo archivo maestro que contendra todos los <strong>changeSets</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">databaseChangeLog</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">databaseChangeLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- changeSet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id: 001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    author: alejo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - createTable:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tableName: users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            columns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name: id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                type: UUID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    primaryKey: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name: name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                type: VARCHAR(100)</span><br></span></code></pre></div></div>
<p>De esta forma tendr√°s que tener el proyecto si utilizas esta opci√≥n.</p>
<img src="http://iamdevops.site/img/blog/devops/changelogmaster.png" width="600">
<p>| ‚ö†Ô∏è Esto es √∫til en proyectos peque√±os o cuando prefieres tener todo en un solo archivo lo cual puede generar al gunos problemas a largo plazo</p>
</li>
<li>
<p>opci√≥n 2
En este caso se implementa un archivo que contendr√° todos los modelos de (changeSets), en el que tendremos las rutas de los <strong>changeSets</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">databaseChangeLog-master</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># changelogs/db.changelog-master.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">databaseChangeLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    file: changelogs/001-init-schema.yaml</span><br></span></code></pre></div></div>
<p>| Cada changeSet es √∫nico por id + author. No repitas estos valores.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">changelogs/001-init-schema.yaml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    databaseChangeLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - changeSet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        id: 001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        author: alejo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        changes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - createTable:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                tableName: users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                columns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name: id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    type: UUID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        primaryKey: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name: name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    type: VARCHAR(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name: email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    type: VARCHAR(150)</span><br></span></code></pre></div></div>
<img src="http://iamdevops.site/img/blog/devops/liquivasetreeprod.png" width="600">
<p>‚úÖ Este modelo de carpetas te permitir√° escalar de una forma m√°s f√°cil y poder versionar todos tus cambios de una forma eficiente, en caso de que quieras
realizar alg√∫n cambio</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vamos-a-correr-nuestro-poyecto">Vamos a correr nuestro poyecto<a href="http://iamdevops.site/blog/liquibase#vamos-a-correr-nuestro-poyecto" class="hash-link" aria-label="Enlace directo al Vamos a correr nuestro poyecto" title="Enlace directo al Vamos a correr nuestro poyecto">‚Äã</a></h3>
<p>Perfecto si llegaste hasta aqu√≠ ya podemos correr los comandos de nuestro üê≥ <strong>docker-compose</strong> para correr el proyecto</p>
<p>‚úÖ 1. Levantar los servicios en segundo plano
Esto crea y arranca los contenedores:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose up -d</span><br></span></code></pre></div></div>
<p>| üîç Esto arrancar√° el contenedor de PostgreSQL y lo dejar√° corriendo en segundo plano ya que usamos <strong>-d</strong>.</p>
<p>‚úÖ 2. Verificar que la base de datos est√° lista
Liquibase depende de que la base de datos est√© lista. Aseg√∫rate de que el servicio db est√© healthy:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose ps</span><br></span></code></pre></div></div>
<p>veras algo como esto</p>
<img src="http://iamdevops.site/img/blog/devops/liquivasetreeprod.png" width="600">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-c√≥mo-sabe-liquibase-qu√©-ya-corri√≥">üß† ¬øC√≥mo sabe Liquibase qu√© ya corri√≥?<a href="http://iamdevops.site/blog/liquibase#-c%C3%B3mo-sabe-liquibase-qu%C3%A9-ya-corri%C3%B3" class="hash-link" aria-label="Enlace directo al üß† ¬øC√≥mo sabe Liquibase qu√© ya corri√≥?" title="Enlace directo al üß† ¬øC√≥mo sabe Liquibase qu√© ya corri√≥?">‚Äã</a></h3>
<p>Liquibase registra los changeSets ejecutados en una tabla llamada DATABASECHANGELOG. As√≠ evita repetir cambios y permite auditar qu√© se aplic√≥, cu√°ndo y por qui√©n.</p>
<img src="http://iamdevops.site/img/blog/devops/liquibaserun.png" width="600">
<p>En este punto ya tenemos nuestros servicios corriendo, y con ya podremos ejecutar</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it liquibase_cli liquibase update</span><br></span></code></pre></div></div>
<p>Si todo te sale bien, deber√°s ver algo como se ve en la imagen.</p>
<img src="http://iamdevops.site/img/blog/devops/primerejecucion.png" width="600">
<p>| Esto ejecutar√° todos los changeSets del archivo db.changelog-master.yaml y aplicar√° los cambios en la base de datos PostgreSQL.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-por-qu√©-se-crea-autom√°ticamente">üß† ¬øPor qu√© se crea autom√°ticamente?<a href="http://iamdevops.site/blog/liquibase#-por-qu%C3%A9-se-crea-autom%C3%A1ticamente" class="hash-link" aria-label="Enlace directo al üß† ¬øPor qu√© se crea autom√°ticamente?" title="Enlace directo al üß† ¬øPor qu√© se crea autom√°ticamente?">‚Äã</a></h3>
<p>La base de datos se crea autom√°ticamente porque se lo est√°s indicando al contenedor de PostgreSQL con POSTGRES_DB al inicio.</p>
<img src="http://iamdevops.site/img/blog/devops/conectiondb.png" width="600">
<p>y en nuestra base de datos <strong>Postgres</strong> podremos ver lo siguiente</p>
<img src="http://iamdevops.site/img/blog/devops/basededatos.png" width="600">
<p>Cuando corremos este comando <strong>liquibase</strong> se crearan dos tablas <code>databasechangelog</code> y <code>databasechangeloglock</code></p>
<table><thead><tr><th>Tabla</th><th>¬øPara qu√© sirve?</th></tr></thead><tbody><tr><td><code>databasechangelog</code></td><td>Historial de cambios ya aplicados</td></tr><tr><td><code>databasechangeloglock</code></td><td>Evita conflictos por ejecuci√≥n simult√°nea</td></tr></tbody></table>
<p>Genial hasta este punto ya tenemos nuestro proyecto creado y corriendo, ahora realizaremos una actualizaci√≥n a la tabla <code>users</code> que creamos
donde crearemos un <code>changeSet</code></p>
<ul>
<li>Creemos otro archivo dentro de nuestra carpeta <code>changelogs</code> con el nombre <code>002-create-users-table.yaml</code></li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">databaseChangeLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- changeSet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id: 002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    author: alejo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - addColumn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tableName: users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            columns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name: birthdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                type: DATE</span><br></span></code></pre></div></div>
<p>|Cada changeSet es √∫nico por id + author. No repitas estos valores.</p>
<p>En este caso aremos un cambio ala tabla <code>users</code> donde agregaremos la columna de <strong>birthdate</strong></p>
<p>Ya creado nuestro archivo ejecutaremos nuevamente nuestro comando, que generara los cambios en la base de datos.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it liquibase_cli liquibase update</span><br></span></code></pre></div></div>
<p>al ejecutar deber√° salir lo que se ve en la siguiente imagen</p>
<img src="http://iamdevops.site/img/blog/devops/runliquibasechange.png" width="600">
<p>Para comprobar el cambio te puedes conectar ala base de datos y validar que se crearon los campos como los definimos</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="c√≥mo-funciona-el-rollback">¬øC√≥mo funciona el rollback?<a href="http://iamdevops.site/blog/liquibase#c%C3%B3mo-funciona-el-rollback" class="hash-link" aria-label="Enlace directo al ¬øC√≥mo funciona el rollback?" title="Enlace directo al ¬øC√≥mo funciona el rollback?">‚Äã</a></h3>
<p>Liquibase puede revertir cambios de varias maneras, pero solo si sabe c√≥mo hacerlo. Esto es posible si:</p>
<p>El changeSet tiene rollback autom√°tico (por ejemplo, createTable se puede revertir con dropTable).
T√∫ defines expl√≠citamente el rollback en tu changeSet.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="como-podemos-rollback">Como podemos rollback<a href="http://iamdevops.site/blog/liquibase#como-podemos-rollback" class="hash-link" aria-label="Enlace directo al Como podemos rollback" title="Enlace directo al Como podemos rollback">‚Äã</a></h3>
<p>Liquibase permite revertir usando distintos comandos:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-ejemplo-de-rollback">üîÅ Ejemplo de rollback<a href="http://iamdevops.site/blog/liquibase#-ejemplo-de-rollback" class="hash-link" aria-label="Enlace directo al üîÅ Ejemplo de rollback" title="Enlace directo al üîÅ Ejemplo de rollback">‚Äã</a></h4>
<ul>
<li>Agregamos a nuestro changelog nuestra actualizaci√≥n</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">databaseChangeLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- changeSet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id: 003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    author: alejo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    changes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - addColumn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tableName: users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            columns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - column:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name: age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                type: INT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rollback:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - dropColumn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            columnName: age</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tableName: users</span><br></span></code></pre></div></div>
<p>Este archivo:</p>
<ul>
<li>
<p>Agrega una columna age a la tabla users.</p>
</li>
<li>
<p>Define que el rollback elimina esa columna.</p>
</li>
<li>
<p>Actualizamos nuestr archivo üìò <code>db.changelog-master.yaml</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">databaseChangeLog:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        file: changelogs/001-create-table-user.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        file: changelogs/002-insert-users.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        file: changelogs/003-add-column-age.yaml</span><br></span></code></pre></div></div>
</li>
</ul>
<p>Deberas tener algo asi, como se ve en la siguiente imagen</p>
<img src="http://iamdevops.site/img/blog/devops/rollbackliquibase.png" width="600">
<p>Hora vamos a ejecutarlo, En este caso corremos primeros nuestra actualizaci√≥n, donde se agregar√° <code>ege</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    docker exec -it liquibase_cli liquibase update</span><br></span></code></pre></div></div>
<p>Como s√© que todo t√© sali√≥ bien deber√° salirte en tu consola algo como esto y en tu tabla debi√≥ aparecer la columna <code>ege</code></p>
<img src="http://iamdevops.site/img/blog/devops/addege.png" width="600">
<p>Para realizar el rollback tienes varias opciones, aqu√≠ dejar√© dos que puedes usar sin problema</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-1-rollback-de-un-changeset-espec√≠fico-desde-003">üîÅ 1. Rollback de un changeSet espec√≠fico (desde 003)<a href="http://iamdevops.site/blog/liquibase#-1-rollback-de-un-changeset-espec%C3%ADfico-desde-003" class="hash-link" aria-label="Enlace directo al üîÅ 1. Rollback de un changeSet espec√≠fico (desde 003)" title="Enlace directo al üîÅ 1. Rollback de un changeSet espec√≠fico (desde 003)">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker compose exec liquibase liquibase rollbackCount 1</span><br></span></code></pre></div></div>
<p>Este revierte el √∫ltimo cambio (003), usando el bloque rollback.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-2-rollback-por-id">üîÅ 2. Rollback por ID<a href="http://iamdevops.site/blog/liquibase#-2-rollback-por-id" class="hash-link" aria-label="Enlace directo al üîÅ 2. Rollback por ID" title="Enlace directo al üîÅ 2. Rollback por ID">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    docker compose exec liquibase liquibase liquibase rollbackToDate "2025-06-11T20:00:00"</span><br></span></code></pre></div></div>
<p>Este revierte todos los cambios hasta (pero no incluyendo) el changeSet con id: 002.</p>
<p>Si se aplica el rollback volveremos a la versi√≥n 002 de una forma f√°cil.</p>
<img src="http://iamdevops.site/img/blog/devops/rollbacksucces.png" width="600">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tabla-comandos-">Tabla comandos üéÆ<a href="http://iamdevops.site/blog/liquibase#tabla-comandos-" class="hash-link" aria-label="Enlace directo al Tabla comandos üéÆ" title="Enlace directo al Tabla comandos üéÆ">‚Äã</a></h3>
<p>Aqu√≠ encontrar√°s una serie de comandos que puedes ejecutar para que sigas probando las otras funcionalidades que tiene liquibase.
Te invito a probar y testear todo lo que quieras.</p>
<p>Puedes agregar <code>exec -it</code> para ver hacer la terminal interactiva</p>
<table><thead><tr><th>Comando</th><th>¬øPara qu√© sirve?</th></tr></thead><tbody><tr><td><code>docker compose run liquibase update</code></td><td>Aplica todos los <code>changeSet</code> pendientes definidos en el changelog maestro.</td></tr><tr><td><code>docker compose run liquibase status</code></td><td>Muestra qu√© cambios (changeSets) a√∫n no se han aplicado a la base de datos.</td></tr><tr><td><code>docker compose run liquibase history</code></td><td>Lista todos los <code>changeSets</code> ya aplicados con detalles (fecha, autor, id).</td></tr><tr><td><code>docker compose run liquibase rollbackCount 1</code></td><td>Revierte el √∫ltimo cambio aplicado (puedes cambiar <code>1</code> por otro n√∫mero).</td></tr><tr><td><code>docker compose run liquibase rollbackToDate 2024-01-01</code></td><td>Revierte todos los cambios hechos despu√©s de una fecha espec√≠fica.</td></tr><tr><td><code>docker compose run liquibase validate</code></td><td>Valida el archivo changelog, revisa errores de sintaxis o duplicados.</td></tr><tr><td><code>docker compose run liquibase clearCheckSums</code></td><td>Limpia los checksums para forzar revalidaci√≥n de cambios. √ötil si editaste sets.</td></tr><tr><td><code>docker compose run liquibase changelogSync</code></td><td>Marca todos los cambios como aplicados sin ejecutarlos (¬°√∫til en producci√≥n!).</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="errores">Errores<a href="http://iamdevops.site/blog/liquibase#errores" class="hash-link" aria-label="Enlace directo al Errores" title="Enlace directo al Errores">‚Äã</a></h2>
<p>Como siempre cometemos errores, durante la primera configuraci√≥n implementan mal la conexi√≥n a la base de datos
debido a que estaba apuntando al local host, el cual hace que apunte dentro de su propio contenedor, por eso no lo encontraba
entonces esto se lo correg√≠  el par√°metro url.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Error</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># liquibase.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection could not be created to jdbc:postgresql://localhost:5432/liquibase_demo</span><br></span></code></pre></div></div>
<p>| Est√°s diciendo que se conecte a localhost (jdbc:postgresql://localhost:5432)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gracias--por-llegar-hasta-este-punto">Gracias ü§© por llegar hasta este punto<a href="http://iamdevops.site/blog/liquibase#gracias--por-llegar-hasta-este-punto" class="hash-link" aria-label="Enlace directo al Gracias ü§© por llegar hasta este punto" title="Enlace directo al Gracias ü§© por llegar hasta este punto">‚Äã</a></h3>
<p>A√∫n quedan muchas cosas por explorar de <strong>liquibase</strong>, pero te agradezco por tomarte el tiempo de entrar a este blog. El c√≥digo implementado
lo puedes encontrar en m√≠ git-hub <a href="https://github.com/alejo95/liquibase-lab" target="_blank" rel="noopener noreferrer">alejo95/Liquibase-lab</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mi-punto-de-vista">Mi punto de vista<a href="http://iamdevops.site/blog/liquibase#mi-punto-de-vista" class="hash-link" aria-label="Enlace directo al Mi punto de vista" title="Enlace directo al Mi punto de vista">‚Äã</a></h3>
<p>En realidad, es genial este tipo de herramientas que facilitan la actualizaci√≥n de las bases de datos usando pr√°cticas
del mundo <strong>DevOps</strong>, para m√≠ fue una experiencia genial, ya que me permite entender de una forma f√°cil la implementaci√≥n
de actualizaciones r√°pidas a la base de datos, aparte de eso, cuenta con muchas cualidades que ayudan a esta herramienta mejore
el flujo de trabajo es un <strong>100%</strong>, ya que logramos romper esa barra entre el equipo.</p>
<p>Dejar√© una lista de 10 ventajas que tiene liquibase</p>
<table><thead><tr><th>N¬∫</th><th>Ventaja</th><th>Descripci√≥n</th></tr></thead><tbody><tr><td>1</td><td><strong>Control de versiones</strong></td><td>Lleva historial detallado de los cambios en la base de datos, como Git para el c√≥digo.</td></tr><tr><td>2</td><td><strong>Rollback autom√°tico</strong></td><td>Permite revertir cambios f√°cilmente usando tags, fechas o n√∫mero de cambiosets.</td></tr><tr><td>3</td><td><strong>Seguridad y consistencia</strong></td><td>Asegura que los cambios se apliquen una sola vez y en el orden correcto.</td></tr><tr><td>4</td><td><strong>Integraci√≥n con CI/CD</strong></td><td>Se puede integrar en pipelines para aplicar cambios autom√°ticamente.</td></tr><tr><td>5</td><td><strong>Soporte multiplataforma</strong></td><td>Compatible con PostgreSQL, MySQL, Oracle, SQL Server, H2, entre otros.</td></tr><tr><td>6</td><td><strong>Soporte para m√∫ltiples formatos</strong></td><td>Cambios escritos en XML, YAML, JSON o SQL, seg√∫n la preferencia del equipo.</td></tr><tr><td>7</td><td><strong>Ejecuci√≥n simulada (dry run)</strong></td><td>Permite previsualizar cambios sin aplicarlos realmente (<code>updateSQL</code>, <code>rollbackSQL</code>).</td></tr><tr><td>8</td><td><strong>Gesti√≥n de bloqueos</strong></td><td>Usa locking para evitar conflictos cuando varios procesos intentan modificar la DB.</td></tr><tr><td>9</td><td><strong>Historial centralizado</strong></td><td>Registra todos los cambios aplicados en tablas internas (<code>databasechangelog</code>).</td></tr><tr><td>10</td><td><strong>Comparaci√≥n de esquemas</strong></td><td><code>liquibase diff</code> compara dos bases de datos y genera un changelog autom√°ticamente.</td></tr></tbody></table>]]></content:encoded>
            <category>Liquibase</category>
            <category>Database</category>
            <category>DevOps</category>
            <category>Database DevOps</category>
        </item>
        <item>
            <title><![CDATA[Nginx]]></title>
            <link>http://iamdevops.site/blog/entendiendo_nginx</link>
            <guid>http://iamdevops.site/blog/entendiendo_nginx</guid>
            <pubDate>Thu, 15 May 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Durante alg√∫n tiempo me he topado con el problema de entender qu√© es Nginx y c√≥mo funciona, debido a que es un]]></description>
            <content:encoded><![CDATA[<p>Durante alg√∫n tiempo me he topado con el problema de entender qu√© es Nginx y c√≥mo funciona, debido a que es un
poco confuso, ya que muchas personas hablan de que es un servidor web, un balanceador de cargas, tambi√©n un Proxy
inverso y m√°s, claro es porque tiene todas estas funcionalidades, as√≠ que en este blog exploraremos juntos c√≥mo
funciona y realizaremos algunas pruebas para ver sus diferentes usos.</p>
<img src="http://iamdevops.site/img/blog/nginx/nginx.png" alt="contenedor" width="600">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="qu√©-es-nginx-">¬øQu√© es Nginx? ü´£<a href="http://iamdevops.site/blog/entendiendo_nginx#qu%C3%A9-es-nginx-" class="hash-link" aria-label="Enlace directo al ¬øQu√© es Nginx? ü´£" title="Enlace directo al ¬øQu√© es Nginx? ü´£">‚Äã</a></h2>
<p>En principio es un software de c√≥digo abierto que funciona principalmente como servidor web, que tal y como hablamos
en un principio tiene diferentes funcionalidades, ya que fue creado para mejorar el rendimiento y la estabilidad de
las aplicaciones web, en especial cuando hablamos de entornos de alta demanda, o sea cuando tenemos una aplicaci√≥n que
tienen muchos peticiones.ndo hablamos de entornos de alta demanda, osea cuando tenemos una aplicaci√≥n que tienen
muchos peticiones.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="funcionalidaes-de-nginx-">Funcionalidaes de Nginx üß∞<a href="http://iamdevops.site/blog/entendiendo_nginx#funcionalidaes-de-nginx-" class="hash-link" aria-label="Enlace directo al Funcionalidaes de Nginx üß∞" title="Enlace directo al Funcionalidaes de Nginx üß∞">‚Äã</a></h3>
<p>Nginx es un servidor web que puede acturar como:</p>
<ul>
<li>Servidor web startico: sirve para manejar archivos como html, css y imagenes.</li>
<li>Poxy inverso: reenvia peticiones a otros setvidores (como Node Js, Python).</li>
<li>Balancedor de cargas: distribuye el trafico entre los servidores para evitar sobre cargas.</li>
<li>servidor de cache: guarda copias temporales para acelear las respuestas.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="instalaci√≥n-en-ubuntu-">Instalaci√≥n en Ubuntu üë®‚Äçüíª<a href="http://iamdevops.site/blog/entendiendo_nginx#instalaci%C3%B3n-en-ubuntu-" class="hash-link" aria-label="Enlace directo al Instalaci√≥n en Ubuntu üë®‚Äçüíª" title="Enlace directo al Instalaci√≥n en Ubuntu üë®‚Äçüíª">‚Äã</a></h3>
<p>En este caso realizaremos la instalaci√≥n en Bubuntu, para que puedas realizar algunas pruebas tambien
tendras el codigo disponible para que puedas utilizarlo en tu.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC"> Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update           #  actualizat linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install nginx    #  instalar nginx</span><br></span></code></pre></div></div>
<p>una vez instalado podremos probar si Nginx esta corriendo adecuadamente usando</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC"> Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status nginx</span><br></span></code></pre></div></div>
<p>lo cual mostra algo asi si todo sale correctamente ü•≥</p>
<img src="http://iamdevops.site/img/blog/nginx/nginx_status.png" alt="contenedor" width="800">
<p>de esta forma podremos saber si nuestro servido Nginx fue instalado de una forma correcta y esta funcionando
desde este punto podremos las diferente carracteristicas de Nginx</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="estructura-de-nginx-Ô∏è">Estructura de Nginx üèóÔ∏è<a href="http://iamdevops.site/blog/entendiendo_nginx#estructura-de-nginx-%EF%B8%8F" class="hash-link" aria-label="Enlace directo al Estructura de Nginx üèóÔ∏è" title="Enlace directo al Estructura de Nginx üèóÔ∏è">‚Äã</a></h3>
<p>la estructura de Nginx es la siguiente que se genera automaticamente al instalar</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC"> Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/etc/nginx/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ nginx.conf             # Configuraci√≥n principal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ sites-available/       # Configs de sitios disponibles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ sites-enabled/         # Enlaces a sitios activos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ conf.d/                #Configs adicionales (opcional)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implemetando-nginx-como-servidor-web-Ô∏è">Implemetando Nginx como servidor web üñ•Ô∏è<a href="http://iamdevops.site/blog/entendiendo_nginx#implemetando-nginx-como-servidor-web-%EF%B8%8F" class="hash-link" aria-label="Enlace directo al Implemetando Nginx como servidor web üñ•Ô∏è" title="Enlace directo al Implemetando Nginx como servidor web üñ•Ô∏è">‚Äã</a></h3>
<p>La primera implementaci√≥n que realizaremos es crear una pagina simple, sigue los pasos y podras crear
tu primer servidor web con Nginx en un servidor de linux.</p>
<ol>
<li>
<p>Crearemos una capeta en nuestro servidor üìÇ</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC"> Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /var/www/miweb</span><br></span></code></pre></div></div>
<ul>
<li><code>-p</code> crea carpetas intermedias si no existen.</li>
<li><code>/var/www/</code> es el lugar t√≠pico donde se alojan los sitios web.</li>
</ul>
<p>este comando nos creara una carpeta en la ruta que le indicamos</p>
</li>
<li>
<p>Es hora de crear nuestra super pagina üî®
<code>bash title=" Bash"  echo "&lt;h1&gt;Hola Bienvenidos a I am Devops &lt;/h1&gt;" | sudo tee /var/www/miweb/index.html </code>
Esto nos creara un archivo index.html con un mensaje.
Puedes editarlo despu√©s con un editor como nano, vim o Visual Studio Code.
en caso de que estes en un servidor de linux o uno de sus derivados es mas factible usar nano o vim</p>
</li>
<li>
<p>Configuraci√≥n de nuestro sitio ‚öôÔ∏è</p>
<p>Nginx usa un archivo de configuraci√≥n que nos permite saber c√≥mo manejar los archivos
ya que podemos tener alojado mas de una <em>web estatica</em> dentro de nuestro servidor para crear nuestro achivo de confiraci√≥n,</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC"> Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/nginx/sites-available/miweb</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC"> site-avalible</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80;                       # Escucha en el puerto 80 (HTTP)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name localhost;           # Nombre del servidor (puede ser dominio o IP)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root /var/www/miweb;             # Ruta al contenido del sitio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index index.html;                # Archivo que se abre por defecto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try_files $uri $uri/ =404;   # Busca el archivo, si no existe, da error 404</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li>
<p>Habilitando nuestro sitio üîì</p>
<p>para poder habilitar nuestro sitio es necesrio vincular nueso <code>site-available/</code> a nuestro <code>site-enabled</code>
para realizar ejecutaremos el siguiente comando para que se vincule</p>
<p>la ruta que debemos buscar si queremos encontrar estos archivos puede <code>/etc/nginx/sites-available/miweb</code> que es donde
tendras a disponibles todos los archivos de nginx.</p>
<ul>
<li><strong>sites-available</strong> : es el lugar donde estan configurados todos los sitios que se quieren habilitar.</li>
<li><strong>sites-enabled</strong> : es donde le damos luz verde para poder salir.</li>
</ul>
<p>en primer lugar iremos a <code>sites-available</code> y crearemos un archivo con el nombre de nuesto site</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> vim /etc/nginx/sites-available/miweb</span><br></span></code></pre></div></div>
<p>de esta forma crearemos un archivo de configuraci√≥n para nuestra pagina en nuestro servidor de ubuntu
este caso es para un servidor en local, en un futuro aprenderemos como hacer para que lo hagas en produci√≥n</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">html</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen [::]:80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root /var/www/miweb;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name localhost;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index index.html index.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try_files $uri $uri/ =404;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>una vez ya creado nuestro archivo estatico y nuestar configurac√≥n, crearemos un simbolo de nuestro archivo en la
carpeta <code>sites-enabled</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ln -s /etc/nginx/sites-available/miweb /etc/nginx/sites-enabled/</span><br></span></code></pre></div></div>
</li>
<li>
<p>validaci√≥n de la configurac√≥n ü•≥
para este corrierndo corriendo el comando de test que trae nginx</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nginx -t</span><br></span></code></pre></div></div>
<p>si todo esta corercto te saldra un mensaje parecido al siguiente</p>
<img src="http://iamdevops.site/img/blog/nginx/nginx_config.png" alt="contenedor" width="600">
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="los-errores-">Los errores üòÖ<a href="http://iamdevops.site/blog/entendiendo_nginx#los-errores-" class="hash-link" aria-label="Enlace directo al Los errores üòÖ" title="Enlace directo al Los errores üòÖ">‚Äã</a></h2>
<p>Claramente todos cometemos errores y no estamos excentos de ello, por eso dejo este espacio
ya que cometi algunos errores, donde me ha tocado inciar de 0.</p>
<p>Para eliminar totalmente nginx usamos lo siguiente</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">Bash</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt remove --purge nginx nginx-common -y ---   # Eliminamos totalmente nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt autoremove -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo rm -rf /etc/nginx /var/www/miweb               # Eliminamos los archivos creados</span><br></span></code></pre></div></div>
<p>de aqui solo queda volver a instalar <em>Ngnx</em> y volver a inciar nuestra configuraci√≥n de cero.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="novemos-en-la-2-parte-de-este-blog-">Novemos en la 2 parte de este blog üßê<a href="http://iamdevops.site/blog/entendiendo_nginx#novemos-en-la-2-parte-de-este-blog-" class="hash-link" aria-label="Enlace directo al Novemos en la 2 parte de este blog üßê" title="Enlace directo al Novemos en la 2 parte de este blog üßê">‚Äã</a></h2>]]></content:encoded>
            <category>Nginx</category>
            <category>Redes</category>
        </item>
        <item>
            <title><![CDATA[Manejo del repositorio]]></title>
            <link>http://iamdevops.site/blog/manejo-del-repositorio</link>
            <guid>http://iamdevops.site/blog/manejo-del-repositorio</guid>
            <pubDate>Sun, 27 Apr 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Hola y bienvenidos a este blog, el cual est√° orientado a entender como podemos manejar nuestros flujo]]></description>
            <content:encoded><![CDATA[<p>Hola y bienvenidos a este blog, el cual est√° orientado a entender como podemos manejar nuestros flujo
de trabajo en git, haciendolo un poco mas claro y facil de entender en caso de tener algun problema
en <strong>producci√≥n</strong> üí£ que es lo que no queremos que pase.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-manejo-de-commits">1. Manejo de commits<a href="http://iamdevops.site/blog/manejo-del-repositorio#1-manejo-de-commits" class="hash-link" aria-label="Enlace directo al 1. Manejo de commits" title="Enlace directo al 1. Manejo de commits">‚Äã</a></h2>
<p>Al momento que generamos un commit es muy normal agregar el comentario sin una referencia las cuales nos
indiquen que estamos realizando en nuestro commit, para esto es recomendable usar banderas que nos permitan
entender que hicimos en nuestros commits para esto hacemos uso de las siguientes <strong>Acciones</strong> o <strong>banderas</strong>:</p>
<ul>
<li>
<p><strong>[Acci√≥n]</strong>: identifica el tipo de commit</p>
<ul>
<li><code>feature</code> -  Se introduce una nueva caracter√≠stica con los cambios</li>
<li><code>refactor</code> ‚Äì C√≥digo refactorizado que no corrige un error ni agrega una caracter√≠stica</li>
<li><code>docs</code> ‚Äì Actualizaciones de la documentaci√≥n, como el README u otros archivos de rebajas</li>
<li><code>style</code> ‚Äì Cambios que no afectan el significado del c√≥digo, probablemente relacionados con el formato del c√≥digo, como espacios en blanco, punto y coma faltantes, etc.</li>
<li><code>test</code> ‚Äì Incluyendo pruebas nuevas o corrigiendo pruebas anteriores</li>
<li><code>perf</code> ‚Äì Mejoras de rendimiento</li>
<li><code>ci</code> ‚Äì Relacionados con la integraci√≥n continua</li>
<li><code>build</code> ‚Äì Cambios que afectan al sistema de compilaci√≥n o dependencias externas</li>
<li><code>revert</code> ‚Äì revierte una confirmaci√≥n anterior</li>
</ul>
</li>
<li>
<p><strong>Cuerpo</strong>: Entre 50 y 150 caracteres resaltando <strong>¬øqu√©?</strong> y <strong>¬øpor qu√©?</strong>.</p>
</li>
<li>
<p><strong>Idioma</strong>: Ingl√©s.</p>
</li>
</ul>
<blockquote>
<p><strong>Ejemplo</strong><br>
<code>[Added] validation so that the accounting information in the vendor once audited cannot be modified</code><br>
<em>(Comienza con may√∫scula y sin punto final.)</em></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-nomenclatura-de-ramas-branch">1.2. Nomenclatura de ramas (branch)<a href="http://iamdevops.site/blog/manejo-del-repositorio#12-nomenclatura-de-ramas-branch" class="hash-link" aria-label="Enlace directo al 1.2. Nomenclatura de ramas (branch)" title="Enlace directo al 1.2. Nomenclatura de ramas (branch)">‚Äã</a></h2>
<p>Con la nomenclatura la idea es siempre buscar identificar las ramas donde estamos trabajando y as√≠ llevar
un flujo de versiones saludable, que sea f√°cil de entender, en este ejemplo usaremos una nomenclatura basada
en el flujo de trabajo de Git Flow.</p>
<p>Siguiendo Git Flow te encontrar√°s con las siguientes ramas:</p>
<ul>
<li><strong>master</strong>: versiones estables en producci√≥n (<code>vX.Y.Z</code>).</li>
<li><strong>develop</strong>: integraci√≥n de nuevas features.</li>
<li><strong>feature/</strong>*: desarrollo de caracter√≠sticas (desde <code>develop</code>).</li>
<li><strong>release/</strong>*: preparaci√≥n de la pr√≥xima versi√≥n (desde <code>develop</code>).</li>
<li><strong>hotfix/</strong>*: correcciones urgentes (desde <code>master</code>).</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Git Flow Diagram" src="http://iamdevops.site/assets/images/Deploymentflow-156ebe264a91c435f1b109b0cadae3d2.png" width="1901" height="1575" class="img_ev3q"></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hoja-de-trucos-comandos">Hoja de trucos (Comandos)<a href="http://iamdevops.site/blog/manejo-del-repositorio#hoja-de-trucos-comandos" class="hash-link" aria-label="Enlace directo al Hoja de trucos (Comandos)" title="Enlace directo al Hoja de trucos (Comandos)">‚Äã</a></h3>
<p>Esta hoja de trucos tiene los <strong>comandos</strong> mas utilizados dentro del flujo de trabajo üßëüèº‚Äçüíª, dentro de mi
consideraci√≥n son los que mas usaras durante tu carrera como programor o algunas de sus ramas.</p>
<p>aqui les dejo üëå</p>
<hr>
<table><thead><tr><th>Operaci√≥n</th><th>Comando</th></tr></thead><tbody><tr><td>Clonar repositorio</td><td><code>git clone ssh://usuario@dominio.com/repo.git</code></td></tr><tr><td>Crear repo local</td><td><code>git init</code></td></tr><tr><td>Estado de archivos</td><td><code>git status</code></td></tr><tr><td>Ver diferencias</td><td><code>git diff</code></td></tr><tr><td>A√±adir todos los cambios</td><td><code>git add .</code></td></tr><tr><td>Commit con mensaje</td><td><code>git commit -m "Mensaje descriptivo"</code></td></tr><tr><td>Modificar √∫ltimo commit</td><td><code>git commit --amend</code></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ramas-y-etiquetas">Ramas y etiquetas<a href="http://iamdevops.site/blog/manejo-del-repositorio#ramas-y-etiquetas" class="hash-link" aria-label="Enlace directo al Ramas y etiquetas" title="Enlace directo al Ramas y etiquetas">‚Äã</a></h2>
<table><thead><tr><th>Operaci√≥n</th><th>Comando</th></tr></thead><tbody><tr><td>Listar ramas</td><td><code>git branch</code></td></tr><tr><td>Crear nueva rama</td><td><code>git branch &lt;nombre&gt;</code></td></tr><tr><td>Cambiar de rama</td><td><code>git checkout &lt;nombre&gt;</code></td></tr><tr><td>Etiquetar versi√≥n</td><td><code>git tag v1.2.3</code></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="actualizar-y-publicar">Actualizar y publicar<a href="http://iamdevops.site/blog/manejo-del-repositorio#actualizar-y-publicar" class="hash-link" aria-label="Enlace directo al Actualizar y publicar" title="Enlace directo al Actualizar y publicar">‚Äã</a></h2>
<table><thead><tr><th>Operaci√≥n</th><th>Comando</th></tr></thead><tbody><tr><td>Descargar cambios sin merge</td><td><code>git fetch</code></td></tr><tr><td>Descargar y merge</td><td><code>git pull origin &lt;branch&gt;</code></td></tr><tr><td>Enviar cambios a remoto</td><td><code>git push origin &lt;branch&gt;</code></td></tr><tr><td>Enviar etiquetas</td><td><code>git push --tags</code></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fusionar-y-rebase">Fusionar y rebase<a href="http://iamdevops.site/blog/manejo-del-repositorio#fusionar-y-rebase" class="hash-link" aria-label="Enlace directo al Fusionar y rebase" title="Enlace directo al Fusionar y rebase">‚Äã</a></h2>
<table><thead><tr><th>Operaci√≥n</th><th>Comando</th></tr></thead><tbody><tr><td>Merge</td><td><code>git merge &lt;branch&gt;</code></td></tr><tr><td>Rebase</td><td><code>git rebase &lt;branch&gt;</code></td></tr><tr><td>Abortar rebase</td><td><code>git rebase --abort</code></td></tr><tr><td>Continuar rebase</td><td><code>git rebase --continue</code></td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deshacer">Deshacer<a href="http://iamdevops.site/blog/manejo-del-repositorio#deshacer" class="hash-link" aria-label="Enlace directo al Deshacer" title="Enlace directo al Deshacer">‚Äã</a></h2>
<table><thead><tr><th>Operaci√≥n</th><th>Comando</th></tr></thead><tbody><tr><td>Reset total (descarta todo)</td><td><code>git reset --hard HEAD</code></td></tr><tr><td>Descartar cambios en un archivo</td><td><code>git checkout HEAD &lt;file&gt;</code></td></tr><tr><td>Revertir un commit</td><td><code>git revert &lt;commit&gt;</code></td></tr><tr><td>Reset suave (preserva cambios staged)</td><td><code>git reset &lt;commit&gt;</code></td></tr></tbody></table>
<hr>]]></content:encoded>
            <category>Git</category>
            <category>Workflow</category>
            <category>Buenas Pr√°cticas</category>
        </item>
    </channel>
</rss>